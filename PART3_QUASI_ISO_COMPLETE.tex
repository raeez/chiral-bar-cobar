
%================================================================
% SECTION: BAR-COBAR INVERSION - COMPLETE QUASI-ISOMORPHISM
%================================================================

\section{Bar-Cobar Inversion: The Quasi-Isomorphism}
\label{sec:bar-cobar-inversion-quasi-iso}

\subsection{Statement of the Main Result}

\begin{theorem}[Bar-Cobar Inversion is Quasi-Isomorphism]\label{thm:bar-cobar-inversion-qi}
Let $\mathcal{A}$ be a chiral algebra on a Riemann surface $X$. Then the natural map:
$$\psi: \Omega(\bar{B}(\mathcal{A})) \longrightarrow \mathcal{A}$$
induced by the bar-cobar adjunction is a \textbf{quasi-isomorphism}, not merely 
an isomorphism in cohomology.

More precisely:
\begin{enumerate}
\item The map $\psi$ is a morphism of chiral algebras (respects all structure)

\item At each genus $g$, the genus-$g$ component:
      $$\psi_g: \Omega_g(\bar{B}_g(\mathcal{A})) \longrightarrow \mathcal{A}$$
      is a quasi-isomorphism
      
\item The full genus-graded map:
      $$\psi = \bigoplus_{g=0}^\infty \psi_g: \Omega(\bar{B}(\mathcal{A})) \longrightarrow \mathcal{A}$$
      converges and is a quasi-isomorphism
      
\item There exists a spectral sequence converging to $H^\bullet(\mathcal{A})$ 
      with $E_1$-page given by the bar-cobar complex
\end{enumerate}
\end{theorem}

\begin{remark}[Quasi-Isomorphism vs Homology Isomorphism]\label{rem:qi-vs-homology-iso}
The distinction is crucial:

\textbf{Homology isomorphism:} $H^\bullet(\psi): H^\bullet(\Omega(B(\mathcal{A}))) 
\xrightarrow{\cong} H^\bullet(\mathcal{A})$ means the induced map on cohomology 
is an isomorphism.

\textbf{Quasi-isomorphism:} The map $\psi$ itself induces isomorphism on all 
cohomology groups, AND this respects all higher structure ($A_\infty$ operations, 
homotopies, etc.).

\textbf{Why it matters:}
\begin{itemize}
\item Homology isomorphism: Only tells us about $H^\bullet$, loses information 
      about differentials and higher operations
      
\item Quasi-isomorphism: Full equivalence in the derived category, preserves 
      ALL homotopy-theoretic information
      
\item For Koszul duality: Need quasi-isomorphism to ensure functoriality and 
      to establish derived equivalences
\end{itemize}

\textbf{Example where distinction is visible:}
Consider the complex $(C^\bullet, d)$ with:
$$\cdots \to 0 \to \mathbb{C} \xrightarrow{0} \mathbb{C} \to 0 \to \cdots$$

This has $H^0 = \mathbb{C}$, $H^i = 0$ for $i \neq 0$.

Compare with the complex $(D^\bullet, \delta)$:
$$\cdots \to 0 \to \mathbb{C} \to 0 \to \cdots$$
(only in degree 0).

There is a homology isomorphism $C^\bullet \to D^\bullet$ (both have $H^0 = \mathbb{C}$), 
+but this is NOT a quasi-isomorphism because the differentials differ. A genuine 
+quasi-isomorphism would require homotopy equivalence at the chain level.
\end{remark}

\subsection{Proof Strategy and Filtration}

The proof of Theorem \ref{thm:bar-cobar-inversion-qi} requires establishing several 
intermediate results. We organize via a filtration on the bar-cobar complex.

\begin{definition}[Bar-Cobar Filtration]\label{def:bar-cobar-filtration}
Define a decreasing filtration on $\Omega(\bar{B}(\mathcal{A}))$ by:
$$F^p\Omega(\bar{B}(\mathcal{A})) = \bigoplus_{n \geq p} \Omega^n(\bar{B}^n(\mathcal{A}))$$

This is the filtration by \textbf{bar degree} (= cobar arity).

\textbf{Geometric meaning:} $F^p$ consists of elements involving at least $p$ points 
in configuration space. As $p \to \infty$, we are considering increasingly complicated 
configurations.

\textbf{Properties:}
\begin{enumerate}
\item $F^0 \supseteq F^1 \supseteq F^2 \supseteq \cdots$
\item $\bigcap_{p=0}^\infty F^p = 0$ (completeness)
\item The differential respects filtration: $d(F^p) \subseteq F^p$
\item The natural map factors through the filtration
\end{enumerate}
\end{definition}

\begin{lemma}[Associated Graded]\label{lem:bar-cobar-associated-graded}
The associated graded of the bar-cobar filtration is:
$$\text{Gr}^p\Omega(\bar{B}(\mathcal{A})) = \Omega^p(\bar{B}^p(\mathcal{A}))$$

The differential on $\text{Gr}^\bullet$ decomposes as:
$$d_{\text{gr}} = d_{\text{bar}} + d_{\text{cobar}} + d_{\text{higher}}$$
where:
\begin{itemize}
\item $d_{\text{bar}}$: Bar differential (collisions)
\item $d_{\text{cobar}}$: Cobar differential (comultiplication)
\item $d_{\text{higher}}$: Mixed terms (bar-cobar interaction)
\end{itemize}
\end{lemma}

\begin{proof}
By definition of associated graded:
$$\text{Gr}^p = F^p / F^{p+1} = \Omega^p(\bar{B}^p(\mathcal{A}))$$

For the differential, consider $\alpha \in F^p$. Then:
$$d(\alpha) = d_{\text{bar}}(\alpha) + d_{\text{cobar}}(\alpha) + \text{(higher terms)}$$

\textbf{Key observation:} 
\begin{itemize}
\item $d_{\text{bar}}$ preserves bar degree (collisions don't change arity)
\item $d_{\text{cobar}}$ changes bar degree by $\pm 1$ (comultiplication)
\item Higher terms involve both operations
\end{itemize}

Therefore on $\text{Gr}^p$, only the terms preserving filtration survive, giving 
the stated decomposition.
\end{proof}

\subsection{Spectral Sequence Construction}

\begin{theorem}[Bar-Cobar Spectral Sequence]\label{thm:bar-cobar-spectral-sequence}
The filtration from Definition \ref{def:bar-cobar-filtration} induces a spectral 
sequence:
$$E_0^{p,q} = \Omega^p(\bar{B}^p(\mathcal{A}))^q \implies H^{p+q}(\mathcal{A})$$
converging to the cohomology of $\mathcal{A}$.

\textbf{Explicit description of pages:}
\begin{align*}
E_0^{p,q} &= \Omega^p(\bar{B}^p(\mathcal{A}))^q \quad \text{(raw terms)} \\
E_1^{p,q} &= H^q(\Omega^p(\bar{B}^p(\mathcal{A})), d_{\text{internal}}) 
            \quad \text{(internal cohomology)} \\
E_2^{p,q} &= H^q(H^p(\bar{B}^\bullet(\mathcal{A})), d_{\text{bar}}) 
            \quad \text{(bar cohomology)} \\
E_\infty^{p,q} &= \text{Gr}^p H^{p+q}(\mathcal{A}) \quad \text{(limiting page)}
\end{align*}
\end{theorem}

\begin{proof}[Proof Outline]
This is a standard spectral sequence associated to a filtered complex. We verify 
the key properties:

\textbf{Step 1: $E_0$ page.} This is just the raw complex with its bigrading:
$$E_0^{p,q} = F^p\Omega^{p+q}(\bar{B}(\mathcal{A})) / F^{p+1}\Omega^{p+q}(\bar{B}(\mathcal{A}))$$

By definition of filtration, this is precisely $\Omega^p(\bar{B}^p(\mathcal{A}))^q$.

\textbf{Step 2: $d_0$ differential.} On the $E_0$ page:
$$d_0: E_0^{p,q} \to E_0^{p,q+1}$$
is the \textbf{internal differential} $d_{\text{internal}}$ (from the differential 
on $\mathcal{A}$ itself).

Taking cohomology gives the $E_1$ page.

\textbf{Step 3: $d_1$ differential.} On the $E_1$ page:
$$d_1: E_1^{p,q} \to E_1^{p+1,q}$$
is induced by the \textbf{bar differential} $d_{\text{bar}}$ (collisions in 
configuration space).

Taking cohomology gives the $E_2$ page.

\textbf{Step 4: Higher differentials.} For $r \geq 2$:
$$d_r: E_r^{p,q} \to E_r^{p+r,q-r+1}$$

These differentials encode higher-order interactions between bar and cobar operations.

\textbf{Step 5: Convergence.} The spectral sequence converges because:
\begin{enumerate}
\item The filtration is complete: $\bigcap_p F^p = 0$
\item The filtration is exhaustive: $\bigcup_p F^p = \Omega(\bar{B}(\mathcal{A}))$
\item The complex is bounded in each column (fixed $p$)
\end{enumerate}

By standard spectral sequence theory (Weibel \cite{Wei94}, Chapter 5), this ensures:
$$E_\infty^{p,q} = \text{Gr}^p H^{p+q}(\Omega(\bar{B}(\mathcal{A})))$$
\end{proof}

\begin{theorem}[Collapse at $E_2$]\label{thm:spectral-sequence-collapse}
For a \textbf{Koszul chiral algebra} $\mathcal{A}$, the spectral sequence from 
Theorem \ref{thm:bar-cobar-spectral-sequence} collapses at the $E_2$ page:
$$E_2^{p,q} = E_\infty^{p,q}$$

This means all higher differentials $d_r$ for $r \geq 2$ vanish.
\end{theorem}

\begin{proof}
The proof has three parts:

\textbf{Part 1: Quadratic presentation.}
For Koszul algebras, the relations are quadratic. This means:
\begin{itemize}
\item Bar complex has relations only in degree 2
\item Higher bar degrees are ``free'' (no higher relations)
\item Cobar complex dual to bar, so also quadratic
\end{itemize}

\textbf{Part 2: Vanishing of higher operations.}
The key Koszul property is that all higher $A_\infty$ operations $m_n$ for $n \geq 3$ 
vanish:
$$m_n = 0 \quad \text{for } n \geq 3$$

In the bar-cobar complex, these operations correspond to higher differentials in 
the spectral sequence. Therefore:
$$d_r = 0 \quad \text{for } r \geq 2$$

\textbf{Part 3: Geometric interpretation.}
Geometrically, $d_r$ measures obstructions at configuration spaces with $r$ colliding 
points. For Koszul algebras:
\begin{itemize}
\item Two-point collisions: Captured by bar differential $d_1$
\item Higher collisions: Vanish due to quadratic relations
\end{itemize}

Therefore the spectral sequence stabilizes at $E_2$.
\end{proof}

\subsection{Convergence at All Genera}

\begin{theorem}[Genus-Graded Convergence]\label{thm:genus-graded-convergence}
The bar-cobar inversion $\psi: \Omega(\bar{B}(\mathcal{A})) \to \mathcal{A}$ 
converges at each genus $g$, and the full genus-graded sum converges in the 
appropriate completion.

More precisely:
\begin{enumerate}
\item \textbf{Genus zero:} 
      $$\psi_0: \Omega_0(\bar{B}_0(\mathcal{A})) \xrightarrow{\sim} \mathcal{A}$$
      is a quasi-isomorphism (classical result, BD ยง3.7)
      
\item \textbf{Fixed genus $g$:}
      $$\psi_g: \Omega_g(\bar{B}_g(\mathcal{A})) \to \mathcal{A}$$
      is a quasi-isomorphism after appropriate quantum corrections
      
\item \textbf{Genus series:}
      $$\psi = \sum_{g=0}^\infty \hbar^{2g-2} \psi_g$$
      converges in the $\hbar$-adic completion for $|\hbar| < R$ (radius determined 
      by growth of moduli spaces)
\end{enumerate}
\end{theorem}

\begin{proof}
We prove each case separately.

\textbf{Case 1: Genus zero (classical).}

At genus zero, we work with rational curves $\mathbb{P}^1$. The bar complex is:
$$\bar{B}_0^n(\mathcal{A}) = \Gamma\left(\overline{C}_n(\mathbb{P}^1), 
\mathcal{A}^{\boxtimes n} \otimes \Omega^\bullet\right)$$

Beilinson-Drinfeld proved \cite{BD04} Theorem 3.7.11:
$$\Omega_0(\bar{B}_0(\mathcal{A})) \xrightarrow{\sim} \mathcal{A}$$

Their proof uses:
\begin{itemize}
\item Chevalley-Cousin resolution
\item Ran space formalism
\item Descent from configuration spaces
\end{itemize}

We have verified (Theorem \ref{thm:BD-extension-higher-genus}) that all technical 
conditions hold at genus zero.

\textbf{Case 2: Fixed genus $g \geq 1$.}

At higher genus, configuration spaces fiber over moduli space:
$$\pi: \overline{C}_n(X) \to \overline{\mathcal{M}}_g$$

The bar complex becomes:
$$\bar{B}_g^n(\mathcal{A}) = \int_{\overline{\mathcal{M}}_{g,n}} 
\pi_*\left(\mathcal{A}^{\boxtimes n} \otimes \Omega^\bullet\right)$$

\textbf{Key lemma:} The pushforward $\pi_*$ preserves quasi-isomorphisms.

\begin{lemma}[Pushforward Preserves QI]\label{lem:pushforward-preserves-qi}
For proper morphism $\pi: Y \to Z$ and quasi-isomorphism $f: \mathcal{F} \to \mathcal{G}$ 
of complexes on $Y$:
$$\pi_*(f): \pi_*\mathcal{F} \to \pi_*\mathcal{G}$$
is a quasi-isomorphism on $Z$.
\end{lemma}

\begin{proof}[Proof of Lemma]
This is a standard result in sheaf cohomology. Since $\pi$ is proper:
$$H^\bullet(Y, \mathcal{F}) = H^\bullet(Z, \pi_*\mathcal{F})$$

If $f$ induces isomorphism on cohomology of $Y$, then $\pi_*(f)$ induces 
isomorphism on cohomology of $Z$.
\end{proof}

Applying this lemma: Since $\psi$ is a quasi-isomorphism fiberwise (over each 
point of $\overline{\mathcal{M}}_g$), the pushforward is also a quasi-isomorphism.

\textbf{Quantum corrections:} At genus $g \geq 1$, we must account for:
\begin{itemize}
\item Central charge contributions: $\sim \int_{\overline{\mathcal{M}}_g} \lambda_1$ 
      (Hodge class)
\item Modular form corrections: Period integrals over $H^1(\Sigma_g)$
\item Anomaly cancellation: Ensures $d_g^2 = 0$
\end{itemize}

With these corrections included (see Part VI, Theorem \ref{thm:quantum-corrections-complete}), 
$\psi_g$ is a quasi-isomorphism.

\textbf{Case 3: Genus series convergence.}

Consider the formal series:
$$\psi(\hbar) = \sum_{g=0}^\infty \hbar^{2g-2} \psi_g$$

\textbf{Growth estimate:} The dimension of moduli space is:
$$\dim \overline{\mathcal{M}}_g = 3g - 3$$

Therefore integrals over $\overline{\mathcal{M}}_g$ contribute with growth:
$$|\psi_g| \sim \text{Vol}(\overline{\mathcal{M}}_g) \sim e^{Cg}$$
for some constant $C$.

The series converges for:
$$|\hbar^2| < e^{-C} \implies |\hbar| < e^{-C/2}$$

This gives a finite radius of convergence, consistent with physical expectations 
(string coupling expansion).

\textbf{$\hbar$-adic completion:} For formal computations, work in:
$$\widehat{\Omega}(\bar{B}(\mathcal{A}))_\hbar = \varprojlim_n 
\Omega(\bar{B}(\mathcal{A})) / \hbar^n$$

In this completion, the series converges unconditionally.
\end{proof}

\subsection{The Counit of the Adjunction}

\begin{proposition}[Counit is Quasi-Isomorphism]\label{prop:counit-qi}
The counit of the bar-cobar adjunction:
$$\epsilon: \bar{B}(\Omega(\mathcal{C})) \longrightarrow \mathcal{C}$$
for a chiral coalgebra $\mathcal{C}$ is also a quasi-isomorphism (dual statement).
\end{proposition}

\begin{proof}
The proof is dual to Theorem \ref{thm:bar-cobar-inversion-qi}. Key steps:

\textbf{Step 1: Filtration.} Define the cobar filtration:
$$F^p\bar{B}(\Omega(\mathcal{C})) = \bigoplus_{n \geq p} \bar{B}^n(\Omega^n(\mathcal{C}))$$

\textbf{Step 2: Spectral sequence.} This induces:
$$E_0^{p,q} = \bar{B}^p(\Omega^p(\mathcal{C}))^q \implies H^{p+q}(\mathcal{C})$$

\textbf{Step 3: Collapse.} For Koszul coalgebras, the spectral sequence collapses 
at $E_2$.

\textbf{Step 4: Convergence.} The same genus-graded argument applies, using:
$$\epsilon = \sum_{g=0}^\infty \hbar^{2g-2} \epsilon_g$$

By Verdier duality (Theorem \ref{thm:verdier-bar-cobar}), $\epsilon$ is dual to $\psi$, 
hence also a quasi-isomorphism.
\end{proof}

\subsection{Functoriality of the Quasi-Isomorphism}

\begin{theorem}[Functoriality]\label{thm:bar-cobar-inversion-functorial}
The quasi-isomorphism $\psi: \Omega(\bar{B}(\mathcal{A})) \xrightarrow{\sim} \mathcal{A}$ 
is \textbf{functorial}: for any morphism $f: \mathcal{A} \to \mathcal{A}'$ of 
chiral algebras, the diagram commutes:

\begin{center}
\begin{tikzcd}
\Omega(\bar{B}(\mathcal{A})) \ar[r, "\psi"] \ar[d, "\Omega(\bar{B}(f))"] 
& \mathcal{A} \ar[d, "f"] \\
\Omega(\bar{B}(\mathcal{A}')) \ar[r, "\psi'"] 
& \mathcal{A}'
\end{tikzcd}
\end{center}
\end{theorem}

\begin{proof}
This follows from the functoriality of bar and cobar constructions established 
in Theorem \ref{thm:bar-functorial} and Theorem \ref{thm:cobar-functorial}.

\textbf{Step 1:} The bar construction is functorial:
$$\bar{B}(f): \bar{B}(\mathcal{A}) \to \bar{B}(\mathcal{A}')$$

\textbf{Step 2:} The cobar construction is functorial:
$$\Omega(g): \Omega(\mathcal{C}) \to \Omega(\mathcal{C}')$$
for any coalgebra morphism $g$.

\textbf{Step 3:} The natural transformation $\psi$ is defined universally via the 
adjunction, hence commutes with all morphisms.

\textbf{Step 4:} At each genus, $\psi_g$ is natural in $\mathcal{A}$, so the 
genus-graded sum is also natural.
\end{proof}

\subsection{Applications to Derived Equivalences}

\begin{corollary}[Derived Equivalence]\label{cor:derived-equivalence-bar-cobar}
For a Koszul chiral algebra $\mathcal{A}$ with Koszul dual $\mathcal{A}^!$, the 
bar and cobar constructions induce an equivalence of derived categories:
$$\mathcal{D}^b(\text{Mod}(\mathcal{A})) \simeq \mathcal{D}^b(\text{Comod}(\mathcal{A}^!))$$
\end{corollary}

\begin{proof}
The quasi-isomorphisms $\psi: \Omega(\bar{B}(\mathcal{A})) \xrightarrow{\sim} \mathcal{A}$ 
and $\epsilon: \bar{B}(\Omega(\mathcal{A}^!)) \xrightarrow{\sim} \mathcal{A}^!$ 
establish:

\begin{center}
\begin{tikzcd}
\text{Mod}(\mathcal{A}) \ar[r, "\bar{B}", shift left=1ex] 
& \text{Comod}(\mathcal{A}^!) \ar[l, "\Omega", shift left=1ex]
\end{tikzcd}
\end{center}

with $\Omega \circ \bar{B} \simeq \text{id}$ and $\bar{B} \circ \Omega \simeq \text{id}$ 
up to quasi-isomorphism.

This induces the stated equivalence on derived categories.
\end{proof}

\begin{remark}[Why Quasi-Isomorphism Matters for Physics]\label{rem:qi-matters-physics}
From the physics perspective, the distinction between homology isomorphism and 
quasi-isomorphism corresponds to:

\textbf{Homology isomorphism only:}
\begin{itemize}
\item On-shell equivalence (only physical states match)
\item Cannot compute scattering amplitudes
\item No information about quantum corrections
\end{itemize}

\textbf{Full quasi-isomorphism:}
\begin{itemize}
\item Off-shell equivalence (entire QFT matches)
\item Can compute correlation functions, amplitudes
\item Quantum corrections encoded in higher homotopies
\item Path integral measure determined by quasi-isomorphism
\end{itemize}

This is why establishing the quasi-isomorphism (not just homology isomorphism) is 
essential for physical applications.
\end{remark}

%================================================================
% RECOGNIZING KOSZUL DUALS IN PRACTICE
%================================================================

\section{Recognizing Koszul Duals in Practice}
\label{sec:recognizing-koszul-duals}

\begin{remark}[How to Identify $\mathcal{A}^!$ in the Wild]\label{rem:identify-koszul-wild}
When encountering a coalgebra $\widehat{\mathcal{C}}$ in geometry or physics, use 
the following checklist to determine if it's a Koszul dual:

\textbf{Step 1: Check necessary conditions} (Theorem \ref{thm:essential-image-koszul}):
\begin{itemize}
\item[$\square$] Conilpotent? ($\bigcap_n \text{coker}(\Delta^n) = 0$)
\item[$\square$] Connected? ($\epsilon: \widehat{\mathcal{C}} \twoheadrightarrow \mathbb{C}$)
\item[$\square$] Geometrically representable? (arises from configuration spaces)
\item[$\square$] Curvature central? (if curved)
\item[$\square$] Formally complete? (with respect to coaugmentation)
\end{itemize}

\textbf{Step 2: Compute candidate algebra:}
$$\mathcal{A}_{\text{candidate}} = \Omega(\widehat{\mathcal{C}})$$

\textbf{Step 3: Verify bar-cobar inversion:}
\begin{itemize}
\item Compute $\bar{B}(\mathcal{A}_{\text{candidate}})$
\item Check if $\bar{B}(\mathcal{A}_{\text{candidate}}) \simeq \widehat{\mathcal{C}}$
\end{itemize}

\textbf{Step 4: If yes:}
$$\widehat{\mathcal{C}} = \mathcal{A}_{\text{candidate}}^!$$

\textbf{Examples where this works:}
\begin{itemize}
\item Heisenberg coalgebra $\to$ Heisenberg algebra
\item Exterior coalgebra $\to$ Free fermion $\beta\gamma$
\item Langlands dual Kac-Moody $\to$ Original Kac-Moody
\item Certain W-algebra coalgebras $\to$ W-algebras at special central charges
\end{itemize}

\textbf{Examples where this fails:}
\begin{itemize}
\item Non-conilpotent coalgebras (cannot be Koszul duals)
\item Geometrically non-representable coalgebras (not from configuration spaces)
\end{itemize}
\end{remark}

